<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }} | {{ .Site.Title }}{{ end }}</title>

{{/* CSS Loading */}}
{{ $options := (dict "targetPath" "css/style.css" "outputStyle" "compressed") }}
{{ $style := resources.Get "scss/main.scss" | css.Sass $options }}
<link rel="stylesheet" href="{{ $style.Permalink }}">

{{/* THEME ENGINE: Blocking Script for Immediate Paint */}}
<script>
  (function() {
    try {
      const validThemes = ['sound', 'market', 'mountain', 'forest', 'sunset'];
      const savedTheme = localStorage.getItem('accessible_md_theme');
      if (validThemes.includes(savedTheme)) {
        document.documentElement.setAttribute('data-theme', savedTheme);
      }
    } catch (e) {}
  })();
</script>

<meta name="generator" content="Hugo {{ hugo.Version }}" />

{{/* IndieWeb Metadata */}}
{{ with .Site.Params.webmentions.username }}
<link rel="webmention" href="https://webmention.io/{{ . }}/webmention" />
<link rel="pingback" href="https://webmention.io/{{ . }}/xmlrpc" />
{{ end }}

<link rel="authorization_endpoint" href="https://indieauth.com/auth">
<link rel="token_endpoint" href="https://tokens.indieauth.com/token">

{{/* Dynamic Rel-Me Links */}}
{{ range .Site.Params.social }}
  {{ if .url }}
    <link rel="me" href="{{ .url }}" />
  {{ end }}
{{ end }}
